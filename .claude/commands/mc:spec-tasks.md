# Generate Next Iteration Tasks (Goal-Oriented Self-Regulation)

Goal-Oriented Self-Regulation Frameworkに基づいて、次のイテレーションのタスクを生成します。
最小限のデプロイ可能な単位（MVP）に焦点を当て、フィードバックループを実現します。

## 前提条件
- design フェーズが承認済みであること
- tasks フェーズが未承認状態、または前回のイテレーションが完了していること

## 実行内容

1. プロジェクトのゴールと現在の状態を評価
2. 次の最小デプロイ可能な機能（MVP）を特定
3. そのMVPに必要な最小限のタスクのみを生成
4. `spec.json`のtasks.statusを"draft"に更新

## プロンプト

Goal-Oriented Self-Regulation Frameworkに基づいて、次のイテレーションのタスクを生成します。

**フィードバック制御の原則：**
1. Goal（ゴール）: プロジェクトの最終目標
2. Input（現在の状態）: 実装済みの機能と環境
3. Comparator（比較）: ゴールと現在の差分
4. Output（次のアクション）: 最小限のデプロイ可能な単位
5. Effect（環境への影響）: デプロイによる変化
6. Feedback（フィードバック）: ユーザーと環境からの反応

1. `.mc/specs/[feature-name]/design.md`を読み込み
2. `.mc/specs/[feature-name]/iteration-history.md`を読み込み（存在する場合）
3. 現在の実装状態とゴールとの差分を分析
4. `tasks.md`を以下の構成で生成または更新：

```markdown
# [機能名] - イテレーション #[番号]

## 現在の状態分析
- **プロジェクトゴール**: [最終目標を明記]
- **現在の達成度**: [実装済み機能と進捗率]
- **前回のフィードバック**: [前回のイテレーションからの学び]

## 次のMVP（最小デプロイ可能単位）
**目標**: [このイテレーションで達成する具体的な価値]
**デプロイ可能な成果物**: [ユーザーが実際に使える機能]

## このイテレーションのタスク

### コアタスク（必須）
- [ ] MVP-001: [最も重要な機能の実装]
  - 見積もり: 2h
  - 成功基準: [具体的な完了条件]
  - デプロイ可能性: Yes

- [ ] MVP-002: [最小限の統合]
  - 見積もり: 1h
  - 成功基準: [具体的な完了条件]
  - デプロイ可能性: After MVP-001

### 品質保証（必須）
- [ ] QA-001: 基本動作確認
  - 見積もり: 0.5h
  - 成功基準: エラーなく動作すること

## 合計見積もり時間: 3.5h（最大4時間以内）

## デプロイメント計画
1. ローカル環境での動作確認
2. ステージング環境へのデプロイ
3. 限定ユーザーへのリリース
4. フィードバック収集

## 次のイテレーションへの準備
- フィードバック収集方法: [具体的な方法]
- 評価指標: [成功を測る指標]
- 次の優先事項の候補: [フィードバックに基づいて決定]

## 注意事項
- このイテレーションは4時間以内で完了可能にする
- デプロイ可能な状態を最優先とする
- 完璧を求めず、動作する最小限を目指す
```

5. `iteration-history.md`に今回のイテレーション計画を追記
6. `spec.json`のtasks.statusを"draft"に更新

**重要**: 各イテレーションは最大4時間で完了し、実際にデプロイ可能な成果物を生成することを目指します。